<!doctype html>
<html lang="sv">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Major Arcana · Admin</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@500;600&family=Jost:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  <style>
    :root {
      --bg: #303030;
      --panel: rgba(48, 48, 48, 0.72);
      --panel-soft: rgba(18, 15, 14, 0.58);
      --text: #f6f1ee;
      --muted: rgba(246, 241, 238, 0.72);
      --line: rgba(246, 241, 238, 0.14);
      --accent: #cabaae;
      --accent-2: #d7c9be;
      --accent-text: #2f2c2a;
      --ok: #50c878;
      --warn: #f2b84b;
      --bad: #e46b6b;
      --shadow-3d: 0 14px 28px rgba(0, 0, 0, 0.34), inset 0 1px 0 rgba(255, 255, 255, 0.08);
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      background:
        radial-gradient(900px 500px at 15% -10%, rgba(202, 186, 174, 0.18) 0%, transparent 60%),
        radial-gradient(900px 500px at 95% 0%, rgba(255, 255, 255, 0.04) 0%, transparent 60%),
        var(--bg);
      color: var(--text);
      font-family: "Jost", Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    }
    .container { width: min(1200px, 94vw); margin: 24px auto 64px; }
    .row { display: grid; gap: 14px; }
    .row.cols-4 { grid-template-columns: repeat(4, minmax(0, 1fr)); }
    .row.cols-6 { grid-template-columns: repeat(6, minmax(0, 1fr)); }
    .row.cols-3 { grid-template-columns: repeat(3, minmax(0, 1fr)); }
    .row.cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
    @media (max-width: 980px) {
      .row.cols-4, .row.cols-6, .row.cols-3, .row.cols-2 { grid-template-columns: 1fr; }
    }
    .panel {
      background: linear-gradient(145deg, rgba(255,255,255,0.08), rgba(255,255,255,0.01));
      border: 1px solid var(--line);
      border-radius: 14px;
      padding: 16px;
      box-shadow: var(--shadow-3d);
      backdrop-filter: blur(10px) saturate(130%);
      -webkit-backdrop-filter: blur(10px) saturate(130%);
    }
    h1, h2, h3 { margin: 0 0 8px; }
    h1 {
      font-size: 32px;
      font-family: "Cormorant Garamond", Georgia, serif;
      font-weight: 600;
      letter-spacing: .01em;
      margin: 0;
    }
    h2 { font-size: 18px; color: var(--text); }
    h3 { font-size: 14px; color: var(--muted); font-weight: 600; letter-spacing: .02em; text-transform: uppercase; }
    .muted { color: var(--muted); }
    .value { font-size: 26px; font-weight: 700; }
    .badge {
      border: 1px solid var(--line);
      border-radius: 999px;
      padding: 4px 10px;
      font-size: 12px;
      color: var(--muted);
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }
    .dot { width: 8px; height: 8px; border-radius: 999px; display: inline-block; }
    .dot.ok { background: var(--ok); }
    .dot.warn { background: var(--warn); }
    .dot.bad { background: var(--bad); }
    .header {
      display: flex;
      gap: 12px;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 14px;
      flex-wrap: wrap;
    }
    .brand-stack {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    .admin-brand-mark {
      width: 64px;
      height: 64px;
      border-radius: 14px;
      border: 1px solid var(--line);
      box-shadow: 0 10px 24px rgba(0, 0, 0, 0.35);
      object-fit: cover;
      background: rgba(10, 10, 10, 0.4);
    }
    .lang-wrap {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .lang-wrap label {
      margin: 0;
      font-size: 12px;
    }
    .lang-wrap select {
      width: auto;
      min-width: 120px;
      padding: 8px 10px;
    }
    .btn {
      border: 1px solid var(--line);
      background: rgba(18, 15, 14, 0.48);
      color: var(--text);
      border-radius: 10px;
      padding: 9px 13px;
      font-size: 14px;
      cursor: pointer;
      box-shadow: 0 8px 18px rgba(0, 0, 0, 0.26), inset 0 1px 0 rgba(255, 255, 255, 0.08);
      backdrop-filter: blur(8px) saturate(120%);
      -webkit-backdrop-filter: blur(8px) saturate(120%);
    }
    .btn:hover {
      border-color: rgba(246, 241, 238, 0.28);
      background: rgba(18, 15, 14, 0.62);
    }
    .btn.primary {
      background: var(--accent);
      color: var(--accent-text);
      border-color: var(--accent);
      font-weight: 600;
    }
    .btn.primary:hover {
      background: var(--accent-2);
      border-color: var(--accent-2);
    }
    .btn.active {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(202, 186, 174, 0.5);
    }
    .btn.small { padding: 6px 10px; font-size: 12px; }
    .btn.danger { border-color: #7f2f2f; color: #ffb2b2; }
    .grid {
      display: grid;
      gap: 10px;
      grid-template-columns: repeat(2, minmax(0,1fr));
    }
    @media (max-width: 760px) { .grid { grid-template-columns: 1fr; } }
    label { font-size: 12px; color: var(--muted); display: block; margin: 0 0 6px; }
    input, select, textarea {
      width: 100%;
      background: var(--panel-soft);
      border: 1px solid var(--line);
      color: var(--text);
      border-radius: 10px;
      padding: 10px 11px;
      font-size: 14px;
      box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.07);
      backdrop-filter: blur(6px) saturate(120%);
      -webkit-backdrop-filter: blur(6px) saturate(120%);
    }
    input[type="checkbox"] {
      width: auto;
      accent-color: var(--accent);
    }
    textarea { min-height: 74px; resize: vertical; }
    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 13px;
    }
    th, td {
      text-align: left;
      border-bottom: 1px solid var(--line);
      padding: 10px 8px;
      vertical-align: top;
    }
    th { color: var(--muted); font-weight: 600; }
    .code { font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; font-size: 12px; }
    .actions { display: flex; flex-wrap: wrap; gap: 6px; }
    .hidden { display: none !important; }
    .status-line {
      margin-top: 10px;
      font-size: 13px;
      color: var(--muted);
      min-height: 18px;
    }
    .modal-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(8, 11, 16, 0.66);
      backdrop-filter: blur(1px);
      z-index: 9998;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 14px;
    }
    .modal-dialog {
      width: min(560px, calc(100vw - 28px));
      border-radius: 14px;
      border: 1px solid var(--line);
      background: linear-gradient(180deg, #1e2430 0%, #171c24 100%);
      box-shadow: 0 24px 44px rgba(0,0,0,0.45);
      padding: 14px;
      display: grid;
      gap: 12px;
    }
    @keyframes modalNudge {
      0% { transform: translateX(0); }
      35% { transform: translateX(-5px); }
      70% { transform: translateX(5px); }
      100% { transform: translateX(0); }
    }
    .modal-dialog.modal-nudge {
      animation: modalNudge 180ms ease-out;
    }
    .modal-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
    }
    .modal-title {
      margin: 0;
      font-size: 17px;
      font-weight: 700;
      color: var(--text);
    }
    .modal-subtitle {
      margin: 0;
      font-size: 13px;
      color: var(--muted);
      line-height: 1.4;
      white-space: pre-wrap;
    }
    .modal-body {
      display: grid;
      gap: 8px;
    }
    .modal-label {
      font-size: 12px;
      color: var(--muted);
      margin: 0;
    }
    .modal-input {
      width: 100%;
      background: var(--panel-soft);
      border: 1px solid var(--line);
      color: var(--text);
      border-radius: 10px;
      padding: 10px 11px;
      font-size: 14px;
    }
    .modal-input.input-error {
      border-color: rgba(228, 107, 107, 0.75);
      box-shadow: 0 0 0 1px rgba(228, 107, 107, 0.35);
    }
    .modal-hint {
      margin: 0;
      font-size: 12px;
      color: var(--muted);
      line-height: 1.4;
      white-space: pre-wrap;
    }
    .modal-hint.error {
      color: #ffb2b2;
    }
    .modal-footer {
      display: flex;
      justify-content: flex-end;
      gap: 8px;
      flex-wrap: wrap;
    }
    body.modal-open {
      overflow: hidden;
    }
    .toast-viewport {
      position: fixed;
      top: 14px;
      right: 14px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      z-index: 9999;
      pointer-events: none;
      width: min(380px, calc(100vw - 24px));
    }
    .toast {
      pointer-events: auto;
      border-radius: 12px;
      border: 1px solid var(--line);
      background: linear-gradient(180deg, rgba(36, 42, 54, 0.96), rgba(20, 24, 31, 0.96));
      box-shadow: 0 16px 34px rgba(0,0,0,0.36);
      padding: 10px 12px;
      display: grid;
      gap: 6px;
      transform: translateY(0);
      opacity: 1;
      transition: opacity .2s ease, transform .2s ease;
    }
    .toast.closing {
      opacity: 0;
      transform: translateY(-6px);
    }
    .toast.success {
      border-color: rgba(80, 200, 120, 0.45);
    }
    .toast.warn {
      border-color: rgba(242, 184, 75, 0.55);
    }
    .toast.error {
      border-color: rgba(228, 107, 107, 0.65);
    }
    .toast-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
    }
    .toast-title {
      font-size: 12px;
      letter-spacing: .02em;
      text-transform: uppercase;
      color: var(--muted);
      font-weight: 700;
    }
    .toast.success .toast-title { color: #86d3a0; }
    .toast.warn .toast-title { color: #f4c56c; }
    .toast.error .toast-title { color: #ffb2b2; }
    .toast-message {
      font-size: 13px;
      line-height: 1.35;
      color: var(--text);
      word-break: break-word;
    }
    .toast-close {
      border: 1px solid var(--line);
      background: #141820;
      color: var(--muted);
      border-radius: 8px;
      width: 26px;
      height: 24px;
      line-height: 1;
      cursor: pointer;
      font-size: 14px;
      padding: 0;
    }
    .toast-close:hover {
      color: var(--text);
      border-color: #3c475c;
    }
    .list {
      max-height: 320px;
      overflow: auto;
      margin: 0;
      padding: 0;
      list-style: none;
    }
    .list li {
      border-bottom: 1px solid var(--line);
      padding: 10px 0;
      font-size: 13px;
    }
    .mini { font-size: 12px; }
    .seg { display: flex; gap: 8px; flex-wrap: wrap; }
    .chip {
      border: 1px solid var(--line);
      border-radius: 999px;
      padding: 5px 9px;
      font-size: 12px;
      color: var(--muted);
      background: rgba(255,255,255,0.01);
    }
    .code-block {
      border: 1px solid var(--line);
      background: #141820;
      border-radius: 10px;
      padding: 10px;
      max-height: 220px;
      overflow: auto;
      font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
      font-size: 12px;
      color: #d7deea;
      white-space: pre-wrap;
    }
    tr.risk-row-selected {
      background: rgba(202, 186, 174, 0.12);
    }
    .sla-chip { font-weight: 600; }
    .sla-ok { border-color: rgba(86, 197, 128, 0.45); color: #86d3a0; }
    .sla-warn { border-color: rgba(244, 197, 108, 0.5); color: #f4c56c; }
    .sla-critical { border-color: rgba(255, 145, 145, 0.6); color: #ff9191; }
    .sla-breached { border-color: rgba(255, 95, 95, 0.8); color: #ff5f5f; background: rgba(255, 95, 95, 0.12); }
    .kpi-meta { margin-top: 6px; font-size: 12px; color: var(--muted); min-height: 16px; }
    .kpi-meta.ok { color: #86d3a0; }
    .kpi-meta.warn { color: #f4c56c; }
    .kpi-meta.bad { color: #ff9191; }
    .risk-detail-layout {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 10px;
      margin-top: 8px;
    }
    @media (max-width: 980px) {
      .risk-detail-layout {
        grid-template-columns: 1fr;
      }
    }
    .risk-detail-card {
      border: 1px solid var(--line);
      border-radius: 10px;
      padding: 10px;
      background: rgba(255, 255, 255, 0.01);
    }
    .risk-detail-card h4 {
      margin: 0 0 8px;
      color: var(--muted);
      text-transform: uppercase;
      font-size: 12px;
      letter-spacing: .02em;
      font-weight: 600;
    }
    .risk-timeline {
      list-style: none;
      padding: 0;
      margin: 0;
      max-height: 200px;
      overflow: auto;
    }
    .risk-timeline li {
      border-bottom: 1px solid var(--line);
      padding: 8px 0;
    }
    .risk-timeline li:last-child {
      border-bottom: 0;
      padding-bottom: 0;
    }
    .risk-timeline-title {
      font-size: 13px;
      font-weight: 600;
      margin-bottom: 2px;
    }
    .risk-detail-actions {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 8px;
    }
    #riskDetailNoteInput {
      min-width: 220px;
      flex: 1 1 260px;
    }
    .audit-layout {
      display: grid;
      grid-template-columns: 1.25fr .95fr;
      gap: 10px;
      margin-top: 10px;
    }
    @media (max-width: 980px) {
      .audit-layout {
        grid-template-columns: 1fr;
      }
    }
    .audit-timeline {
      list-style: none;
      margin: 0;
      padding: 0;
      border: 1px solid var(--line);
      border-radius: 10px;
      max-height: 360px;
      overflow: auto;
      background: rgba(255,255,255,0.01);
    }
    .audit-timeline-item {
      border-bottom: 1px solid var(--line);
      padding: 10px;
      cursor: pointer;
    }
    .audit-timeline-item:last-child {
      border-bottom: 0;
    }
    .audit-timeline-item.active {
      background: rgba(202, 186, 174, 0.14);
    }
    .audit-timeline-item-title {
      font-size: 13px;
      font-weight: 600;
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      gap: 6px;
      margin-bottom: 4px;
    }
    .audit-detail {
      border: 1px solid var(--line);
      border-radius: 10px;
      padding: 10px;
      background: rgba(255,255,255,0.01);
    }
    .audit-facts {
      margin: 8px 0 0;
      padding-left: 18px;
      font-size: 12px;
      color: var(--muted);
      line-height: 1.45;
    }
    .audit-diff {
      margin-top: 8px;
      display: flex;
      flex-direction: column;
      gap: 6px;
    }
    .audit-diff-row {
      border: 1px solid var(--line);
      border-radius: 8px;
      padding: 8px;
      background: rgba(255,255,255,0.01);
    }
    .audit-diff-row-header {
      font-size: 12px;
      font-weight: 600;
      margin-bottom: 6px;
    }
    .audit-diff-row-values {
      display: grid;
      grid-template-columns: 1fr auto 1fr;
      gap: 8px;
      align-items: center;
    }
    .audit-diff-value {
      display: block;
      border: 1px solid var(--line);
      border-radius: 6px;
      padding: 6px;
      font-size: 11px;
      line-height: 1.4;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      word-break: break-word;
    }
    .audit-diff-value.before {
      border-color: rgba(234, 67, 53, 0.4);
      background: rgba(234, 67, 53, 0.08);
    }
    .audit-diff-value.after {
      border-color: rgba(52, 168, 83, 0.4);
      background: rgba(52, 168, 83, 0.08);
    }
    .audit-diff-arrow {
      color: var(--muted);
      font-size: 12px;
      white-space: nowrap;
    }
    .audit-summary {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      margin-top: 10px;
    }
    .overview-layout {
      display: grid;
      grid-template-columns: 1.35fr 1fr;
      gap: 14px;
      margin-bottom: 14px;
    }
    @media (max-width: 980px) {
      .overview-layout {
        grid-template-columns: 1fr;
      }
    }
    .overview-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 10px;
    }
    @media (max-width: 760px) {
      .overview-grid {
        grid-template-columns: 1fr;
      }
    }
    .overview-card {
      border: 1px solid var(--line);
      border-radius: 10px;
      padding: 10px;
      background: rgba(255, 255, 255, 0.01);
    }
    .overview-card h3 {
      margin: 0 0 8px;
    }
    .overview-card .list {
      max-height: 220px;
      padding-right: 2px;
    }
    .overview-card .list li {
      padding: 8px 0;
    }
    .risk-trend-list {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    .risk-trend-row {
      display: grid;
      grid-template-columns: 46px minmax(0, 1fr) 36px;
      align-items: center;
      gap: 8px;
      font-size: 12px;
      color: var(--muted);
    }
    .risk-trend-track {
      height: 8px;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.06);
      overflow: hidden;
      border: 1px solid rgba(255, 255, 255, 0.04);
    }
    .risk-trend-fill {
      height: 100%;
      border-radius: 999px;
      width: 0%;
    }
    .risk-trend-fill.level-1 { background: #50c878; }
    .risk-trend-fill.level-2 { background: #67a9ff; }
    .risk-trend-fill.level-3 { background: #f2b84b; }
    .risk-trend-fill.level-4 { background: #ef8b63; }
    .risk-trend-fill.level-5 { background: #e46b6b; }
    .quick-actions {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      margin-top: 8px;
    }
    .quick-actions .btn {
      flex: 1 1 160px;
      text-align: left;
    }
    .notification-list {
      list-style: none;
      margin: 8px 0 0;
      padding: 0;
      max-height: 280px;
      overflow: auto;
      border: 1px solid var(--line);
      border-radius: 10px;
      background: rgba(255,255,255,0.01);
    }
    .notification-item {
      border-bottom: 1px solid var(--line);
      padding: 10px;
    }
    .notification-item:last-child {
      border-bottom: 0;
    }
    .notification-item.warn {
      border-left: 3px solid var(--warn);
    }
    .notification-item.bad {
      border-left: 3px solid var(--bad);
    }
    .notification-item.ok {
      border-left: 3px solid var(--ok);
    }
    .notification-title {
      font-size: 13px;
      font-weight: 600;
      margin-bottom: 4px;
    }
    .notification-detail {
      font-size: 12px;
      color: var(--muted);
      line-height: 1.4;
    }
    .section-nav {
      position: sticky;
      top: 8px;
      z-index: 20;
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      margin-bottom: 14px;
      padding: 10px;
      backdrop-filter: blur(6px);
    }
    .section-nav .btn.active {
      color: var(--accent-text);
      background: var(--accent);
      border-color: var(--accent);
      box-shadow: 0 12px 22px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.24);
    }
    [data-section-group].hidden {
      display: none !important;
    }
    .section-nav .btn {
      padding: 6px 10px;
      font-size: 12px;
    }
    .template-view-toggle {
      align-items: center;
    }
    .template-category-chips {
      align-items: center;
    }
    .template-category-chips .btn {
      text-transform: none;
    }
    .template-category-chips .btn.active {
      color: #272018;
    }
    .template-bulk-toolbar {
      align-items: center;
    }
    .template-bulk-toolbar .mini {
      margin: 0;
    }
    .template-selection-meta {
      margin-left: auto;
      text-align: right;
    }
    .template-select-col {
      width: 34px;
      text-align: center;
    }
    .template-select-col input {
      margin: 0;
    }
    .template-card-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 10px;
      margin-top: 10px;
    }
    @media (max-width: 980px) {
      .template-card-grid {
        grid-template-columns: 1fr;
      }
    }
    .template-card {
      border: 1px solid var(--line);
      border-radius: 10px;
      padding: 10px;
      background: rgba(255,255,255,0.01);
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    .template-card .title {
      font-size: 14px;
      font-weight: 600;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
    }
    .template-card .meta {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }
    .template-card .footer {
      display: flex;
      gap: 6px;
      flex-wrap: wrap;
    }
    .template-card .selection {
      display: flex;
      align-items: center;
      gap: 6px;
      color: var(--muted);
      font-size: 12px;
    }
    .template-card .selection input {
      margin: 0;
    }
    .template-editor-assist {
      margin-top: 10px;
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 10px;
    }
    @media (max-width: 980px) {
      .template-editor-assist {
        grid-template-columns: 1fr;
      }
    }
    .template-editor-card {
      border: 1px solid var(--line);
      border-radius: 10px;
      padding: 10px;
      background: rgba(255,255,255,0.01);
    }
    .template-editor-card h4 {
      margin: 0 0 8px;
      color: var(--muted);
      text-transform: uppercase;
      font-size: 12px;
      letter-spacing: .02em;
      font-weight: 600;
    }
    .template-variable-cloud {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 8px;
    }
    .template-variable-chip {
      border: 1px solid var(--line);
      border-radius: 999px;
      padding: 5px 9px;
      font-size: 12px;
      color: var(--muted);
      background: rgba(255,255,255,0.02);
    }
    .template-variable-chip.btn {
      cursor: pointer;
      color: var(--text);
      background: #171c24;
    }
    .template-variable-chip.ok {
      border-color: rgba(86, 197, 128, 0.5);
      color: #86d3a0;
    }
    .template-variable-chip.warn {
      border-color: rgba(244, 197, 108, 0.55);
      color: #f4c56c;
    }
    .template-variable-chip.bad {
      border-color: rgba(255, 120, 120, 0.7);
      color: #ff9f9f;
    }
    .template-validation-list {
      display: grid;
      gap: 6px;
      margin-top: 8px;
    }
    .template-validation-item {
      border: 1px solid var(--line);
      border-radius: 8px;
      padding: 7px 9px;
      font-size: 12px;
      line-height: 1.35;
      color: var(--muted);
      background: rgba(255,255,255,0.01);
    }
    .template-validation-item.good {
      border-color: rgba(86, 197, 128, 0.5);
      color: #86d3a0;
    }
    .template-validation-item.warn {
      border-color: rgba(244, 197, 108, 0.55);
      color: #f4c56c;
    }
    .template-validation-item.bad {
      border-color: rgba(255, 120, 120, 0.7);
      color: #ff9f9f;
    }
    .template-signature-row {
      margin-top: 8px;
      display: flex;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
    }
    .tone-presets .btn {
      text-transform: none;
    }
    .setting-preview {
      border: 1px solid var(--line);
      border-radius: 10px;
      padding: 10px;
      background: rgba(255, 255, 255, 0.01);
      line-height: 1.45;
    }
    .preview-brand-row {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 8px;
      flex-wrap: wrap;
    }
    .preview-logo {
      width: 44px;
      height: 44px;
      border-radius: 8px;
      border: 1px solid var(--line);
      background: #111621;
      object-fit: cover;
    }
    .preview-logo.hidden {
      display: none;
    }
    .preview-swatches {
      display: flex;
      gap: 8px;
      align-items: center;
      flex-wrap: wrap;
    }
    .preview-swatch {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      border: 1px solid var(--line);
      border-radius: 999px;
      padding: 4px 8px;
      font-size: 11px;
      color: var(--muted);
      background: rgba(255,255,255,0.02);
    }
    .preview-swatch-dot {
      width: 10px;
      height: 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.25);
    }
    .preview-cta {
      margin-top: 10px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      border-radius: 999px;
      border: 1px solid rgba(202, 186, 174, 0.82);
      padding: 6px 11px;
      font-size: 12px;
      font-weight: 600;
      letter-spacing: .01em;
      text-transform: none;
      background: var(--accent);
      color: var(--accent-text);
      box-shadow: 0 9px 18px rgba(0, 0, 0, 0.24), inset 0 1px 0 rgba(255,255,255,0.36);
    }
    .preview-cta.secondary {
      background: rgba(255, 255, 255, 0.04);
      border-color: rgba(202, 186, 174, 0.48);
      color: var(--text);
      margin-left: 8px;
    }
    .setting-preview .preview-meta {
      margin-bottom: 8px;
      color: var(--muted);
      font-size: 12px;
    }
    .inline-range {
      display: grid;
      gap: 8px;
    }
    .team-summary {
      display: grid;
      grid-template-columns: repeat(4, minmax(0, 1fr));
      gap: 8px;
      margin-top: 10px;
    }
    @media (max-width: 980px) {
      .team-summary {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    }
    .team-summary-item {
      border: 1px solid var(--line);
      border-radius: 10px;
      padding: 8px;
      background: rgba(255, 255, 255, 0.01);
    }
    .team-summary-item .label {
      color: var(--muted);
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: .02em;
    }
    .team-summary-item .value {
      font-size: 18px;
      margin-top: 4px;
    }
    .team-filters {
      margin-top: 10px;
      display: grid;
      grid-template-columns: minmax(0, 1fr) 160px auto;
      gap: 8px;
      align-items: end;
    }
    .team-profile-grid {
      margin-top: 10px;
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 10px;
    }
    @media (max-width: 980px) {
      .team-profile-grid {
        grid-template-columns: 1fr;
      }
    }
    .team-profile-card {
      border: 1px solid var(--line);
      border-radius: 10px;
      padding: 10px;
      background: rgba(255, 255, 255, 0.01);
    }
    .team-profile-card h3 {
      margin: 0 0 8px;
      font-size: 14px;
    }
    .team-profile-list {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 8px;
    }
    @media (max-width: 980px) {
      .team-profile-list {
        grid-template-columns: 1fr;
      }
    }
    .team-profile-item {
      border: 1px solid var(--line);
      border-radius: 8px;
      padding: 7px 9px;
      background: rgba(255, 255, 255, 0.02);
    }
    .team-profile-item .label {
      font-size: 11px;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: .02em;
    }
    .team-profile-item .value {
      margin-top: 3px;
      font-size: 13px;
      word-break: break-word;
    }
    .team-password-grid {
      margin-top: 10px;
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 8px;
    }
    @media (max-width: 980px) {
      .team-password-grid {
        grid-template-columns: 1fr;
      }
    }
    .staff-row-active {
      outline: 1px solid rgba(122, 162, 255, 0.45);
      outline-offset: -1px;
      background: rgba(122, 162, 255, 0.08);
    }
    .invite-preview-actions {
      margin-top: 8px;
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }
    @media (max-width: 980px) {
      .team-filters {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <div class="brand-stack">
        <img src="/assets/major-arcana-mark.svg" class="admin-brand-mark" alt="Major Arcana logotyp" />
        <h1 data-i18n="brand_title">Major Arcana</h1>
      </div>
      <div style="display:flex;flex-direction:column;gap:8px;align-items:flex-end">
        <div class="lang-wrap">
          <label for="languageSelect" class="mini muted" data-i18n="label_language">Språk</label>
          <select id="languageSelect">
            <option value="sv" data-i18n="language_sv">Svenska</option>
            <option value="en" data-i18n="language_en">English</option>
          </select>
        </div>
        <div id="sessionMeta" class="muted" data-i18n="session_not_logged">Inte inloggad</div>
        <div class="seg">
          <select id="tenantSwitchSelect" style="min-width:180px" data-i18n-default-option="tenant_option">
            <option value="" data-i18n="tenant_option">Klinik</option>
          </select>
          <button id="switchTenantBtn" class="btn" data-i18n="switch_tenant">Byt klinik</button>
          <button id="refreshBtn" class="btn" data-i18n="refresh">Uppdatera</button>
          <button id="logoutBtn" class="btn danger" data-i18n="logout">Logga ut</button>
        </div>
      </div>
    </div>

    <section id="loginPanel" class="panel">
      <h2 data-i18n="login_title">Logga in</h2>
      <div class="grid" style="margin-top:10px">
        <div>
          <label for="emailInput" data-i18n="label_email">E-post</label>
          <input id="emailInput" type="email" value="owner@hairtpclinic.se" />
        </div>
        <div>
          <label for="tenantInput" data-i18n="label_tenant_optional">Klinik (valfri)</label>
          <input id="tenantInput" type="text" value="hair-tp-clinic" />
        </div>
        <div>
          <label for="passwordInput" data-i18n="label_password">Lösenord</label>
          <input id="passwordInput" type="password" />
        </div>
      </div>
      <div style="margin-top:12px">
        <button id="loginBtn" class="btn primary" data-i18n="login_title">Logga in</button>
      </div>
      <div id="loginStatus" class="status-line"></div>
      <div id="tenantSelectionPanel" class="hidden" style="margin-top:10px">
        <label for="tenantSelectionSelect" data-i18n="label_multi_tenant">Flera kliniker hittades. Välj klinik:</label>
        <div class="seg">
          <select id="tenantSelectionSelect" style="min-width:220px"></select>
          <button id="completeTenantSelectionBtn" class="btn primary" data-i18n="continue">Fortsätt</button>
        </div>
      </div>
    </section>

    <section id="dashboardPanel" class="hidden">
      <nav id="sectionNav" class="section-nav panel">
        <button class="btn small sectionNavBtn active" data-target="overviewSection" data-i18n="nav_overview">Översikt</button>
        <button class="btn small sectionNavBtn" data-target="templateLifecycleSection" data-i18n="nav_templates">Mallar</button>
        <button class="btn small sectionNavBtn" data-target="reviewsQueueSection" data-i18n="nav_reviews">Granskningar</button>
        <button class="btn small sectionNavBtn" data-target="incidentsQueueSection" data-i18n="nav_incidents">Incidenter</button>
        <button class="btn small sectionNavBtn" data-target="auditSection" data-i18n="nav_audit">Revision</button>
        <button class="btn small sectionNavBtn" data-target="teamSection" data-i18n="nav_team">Team</button>
        <button class="btn small sectionNavBtn" data-target="settingsSection" data-i18n="nav_settings">Inställningar</button>
        <button class="btn small sectionNavBtn" data-target="opsSection" data-i18n="nav_ops">Drift</button>
      </nav>

      <div id="overviewSection" data-section-group="overviewSection" class="row cols-6" style="margin-bottom:14px">
        <article class="panel">
          <h3 data-i18n="kpi_templates">Mallar</h3>
          <div id="templatesTotal" class="value">0</div>
        </article>
        <article class="panel">
          <h3>Aktiva versioner</h3>
          <div id="templatesActive" class="value">0</div>
        </article>
        <article class="panel">
          <h3>Riskutvärderingar</h3>
          <div id="riskTotal" class="value">0</div>
          <div class="kpi-meta">Öppna review-kön för L3-utkast.</div>
          <button id="openReviewsQueueBtn" class="btn small" style="margin-top:8px" data-i18n="open_queue">Öppna kö</button>
        </article>
        <article class="panel">
          <h3>High/Critical öppna</h3>
          <div id="riskOpen" class="value">0</div>
          <div class="kpi-meta">Prioritera incidents med SLA.</div>
          <button id="openIncidentsQueueBtn" class="btn small" style="margin-top:8px" data-i18n="see_incidents">Se incidenter</button>
        </article>
        <article class="panel">
          <h3 data-i18n="kpi_owner_coverage">Ägaråtgärdstäckning</h3>
          <div id="ownerCoverageValue" class="value">0%</div>
          <div id="ownerCoverageMeta" class="kpi-meta">Ingen riskhistorik ännu.</div>
        </article>
        <article class="panel">
          <h3>SLA-indikator</h3>
          <div id="slaIndicatorValue" class="value">0</div>
          <div id="slaIndicatorMeta" class="kpi-meta">Inga öppna incidents.</div>
        </article>
      </div>

      <div class="overview-layout" data-section-group="overviewSection">
        <section class="panel">
          <h2 data-i18n="overview_insights">Översiktsinsikter</h2>
          <div class="overview-grid" style="margin-top:10px">
            <article class="overview-card">
              <h3 data-i18n="latest_activity">Senaste aktivitet</h3>
              <ul id="latestActivityList" class="list">
                <li class="muted mini">Ingen aktivitet ännu.</li>
              </ul>
            </article>
            <article class="overview-card">
              <h3 data-i18n="risk_trends">Risktrender (7 dagar)</h3>
              <div id="riskTrendBars" class="risk-trend-list">
                <div class="mini muted">Ingen riskhistorik ännu.</div>
              </div>
              <div id="riskTrendMeta" class="mini muted" style="margin-top:8px">Väntar på data.</div>
            </article>
          </div>
        </section>

        <aside class="panel">
          <h2 data-i18n="quick_actions">Snabbåtgärder</h2>
          <div class="quick-actions">
            <button id="quickCreateTemplateBtn" class="btn primary" data-i18n="quick_create_template">Skapa mall</button>
            <button id="quickGenerateDraftBtn" class="btn" data-i18n="quick_generate_draft">Skapa utkast med AI</button>
            <button id="quickReviewFlaggedBtn" class="btn" data-i18n="quick_review_flagged">Granska flaggade utkast</button>
          </div>
          <h3 style="margin-top:16px" data-i18n="notifications">Notifieringar</h3>
          <ul id="overviewNotificationsList" class="notification-list">
            <li class="notification-item"><div class="notification-detail">Inga notifieringar ännu.</div></li>
          </ul>
        </aside>
      </div>

      <div id="settingsSection" data-section-group="settingsSection" class="row cols-2">
        <section class="panel">
          <h2 data-i18n="tenant_config">Klinikinställningar</h2>
          <div class="grid" style="margin-top:10px">
            <div>
              <label for="assistantName">Assistentnamn (`assistantName`)</label>
              <input id="assistantName" type="text" />
            </div>
            <div>
              <label for="toneStyle">Tonstil (`toneStyle`)</label>
              <input id="toneStyle" type="text" />
            </div>
            <div>
              <label for="brandProfile">Varumärkesprofil (`brandProfile`)</label>
              <input id="brandProfile" type="text" />
            </div>
            <div>
              <label for="brandLogoUrl">Logga URL (`brandLogoUrl`, http(s):// eller /path)</label>
              <input id="brandLogoUrl" type="text" placeholder="https://..." />
            </div>
            <div>
              <label for="brandPrimaryColor">Primär färg (`brandPrimaryColor`)</label>
              <select id="brandPrimaryColor">
                <option value="#cabaae">#cabaae</option>
                <option value="#d7c9be">#d7c9be</option>
                <option value="#bfaea1">#bfaea1</option>
                <option value="#a58f82">#a58f82</option>
              </select>
            </div>
            <div>
              <label for="brandAccentColor">Accentfärg (`brandAccentColor`)</label>
              <select id="brandAccentColor">
                <option value="#2f2c2a">#2f2c2a</option>
                <option value="#3a3633">#3a3633</option>
                <option value="#4b4541">#4b4541</option>
                <option value="#6a625d">#6a625d</option>
              </select>
            </div>
            <div>
              <label for="riskModifier">Riskkänslighet (`riskSensitivityModifier`, -10 → 10)</label>
              <div class="inline-range">
                <input id="riskModifier" type="number" step="0.1" min="-10" max="10" />
                <input id="riskModifierRange" type="range" step="0.5" min="-10" max="10" />
                <div id="riskModifierDisplay" class="mini muted">0 • neutral</div>
              </div>
            </div>
            <div style="grid-column:1 / -1">
              <label>Tonförval</label>
              <div id="tonePresetButtons" class="seg tone-presets">
                <button type="button" class="btn small tonePresetBtn" data-tone="professional-warm">Professionell & varm</button>
                <button type="button" class="btn small tonePresetBtn" data-tone="concise-executive">Koncis & tydlig</button>
                <button type="button" class="btn small tonePresetBtn" data-tone="empathetic-clinical">Empatisk & klinisk</button>
                <button type="button" class="btn small tonePresetBtn" data-tone="luxury-premium">Premium & exklusiv</button>
              </div>
            </div>
            <div style="grid-column:1 / -1">
              <label for="templateEmailSignature">E-postsignatur (`templateSignaturesByChannel.email`)</label>
              <textarea id="templateEmailSignature" style="min-height:90px" placeholder="Med vänlig hälsning,\n{{clinic_name}}\n{{clinic_phone}}"></textarea>
            </div>
            <div style="grid-column:1 / -1">
              <label for="templateAllowlistOverrides">Tillåtna variabler per kategori (`templateVariableAllowlistByCategory`, JSON)</label>
              <textarea id="templateAllowlistOverrides" style="min-height:90px" placeholder='{"CONSULTATION":["patient_name"]}'></textarea>
            </div>
            <div style="grid-column:1 / -1">
              <label for="templateRequiredOverrides">Obligatoriska variabler per kategori (`templateRequiredVariablesByCategory`, JSON)</label>
              <textarea id="templateRequiredOverrides" style="min-height:90px" placeholder='{"CONSULTATION":["patient_name"]}'></textarea>
            </div>
            <div style="grid-column:1 / -1">
              <label>Förhandsvisning</label>
              <div id="tonePreviewCard" class="setting-preview">
                <div class="preview-brand-row">
                  <img id="tonePreviewLogo" class="preview-logo hidden" alt="Förhandsvisning av logga" />
                  <div class="preview-swatches">
                    <div class="preview-swatch">
                      <span id="tonePreviewPrimaryDot" class="preview-swatch-dot"></span>
                      Primär
                    </div>
                    <div class="preview-swatch">
                      <span id="tonePreviewAccentDot" class="preview-swatch-dot"></span>
                      Accent
                    </div>
                  </div>
                </div>
                <div id="tonePreviewMeta" class="preview-meta">Ingen preview ännu.</div>
                <div id="tonePreviewText">Välj tonstil och assistentnamn för att se exempeltext.</div>
                <div>
                  <span id="tonePreviewPrimaryBtn" class="preview-cta">Primär CTA</span>
                  <span id="tonePreviewAccentBtn" class="preview-cta secondary">Sekundär CTA</span>
                </div>
              </div>
            </div>
          </div>
          <div style="margin-top:12px">
            <button id="saveTenantConfigBtn" class="btn primary" data-i18n="save_config">Spara inställningar</button>
          </div>
          <div id="tenantConfigStatus" class="status-line"></div>
        </section>

        <section class="panel">
          <h2 data-i18n="template_categories">Mallkategorier</h2>
          <div id="categoryBadges"></div>
          <h2 style="margin-top:16px" data-i18n="risk_levels">Risknivåer</h2>
          <div id="riskBadges"></div>
        </section>
      </div>

      <div class="row cols-2" data-section-group="settingsSection" style="margin-top:14px">
        <section class="panel">
          <h2 data-i18n="my_tenants">Mina kliniker</h2>
          <div style="margin-top:8px" class="seg">
            <button id="refreshTenantsBtn" class="btn" data-i18n="refresh_tenants">Uppdatera kliniklista</button>
          </div>
          <div id="tenantCatalog" class="code-block" style="margin-top:10px">Ingen data ännu.</div>
        </section>

        <section class="panel">
          <h2 data-i18n="onboard_tenant">Lägg till ny klinik</h2>
          <div class="grid" style="margin-top:10px">
            <div>
              <label for="onboardTenantId">klinikId (slug)</label>
              <input id="onboardTenantId" type="text" placeholder="curatiio" />
            </div>
            <div>
              <label for="onboardOwnerEmail">Ägarens e-post (`ownerEmail`, valfri)</label>
              <input id="onboardOwnerEmail" type="email" placeholder="owner@clinic.se" />
            </div>
            <div>
              <label for="onboardOwnerPassword">Ägarens lösenord (`ownerPassword`, valfri)</label>
              <input id="onboardOwnerPassword" type="password" placeholder="Krävs om ownerEmail är en annan användare" />
            </div>
            <div>
              <label for="onboardAssistantName">Assistentnamn (`assistantName`)</label>
              <input id="onboardAssistantName" type="text" placeholder="Arcana" />
            </div>
            <div>
              <label for="onboardToneStyle">Tonstil (`toneStyle`)</label>
              <input id="onboardToneStyle" type="text" placeholder="professional-warm" />
            </div>
            <div>
              <label for="onboardBrandProfile">Varumärkesprofil (`brandProfile`)</label>
              <input id="onboardBrandProfile" type="text" placeholder="Curatiio" />
            </div>
            <div>
              <label for="onboardRiskModifier">Riskkänslighet (`riskSensitivityModifier`, -10 → 10)</label>
              <input id="onboardRiskModifier" type="number" step="0.1" min="-10" max="10" placeholder="0" />
            </div>
          </div>
          <div style="margin-top:12px">
            <button id="onboardTenantBtn" class="btn primary" data-i18n="onboard_tenant_btn">Lägg till klinik</button>
          </div>
          <div id="tenantOnboardStatus" class="status-line"></div>
        </section>
      </div>

      <div id="teamSectionGroup" class="row cols-2" data-section-group="teamSection" style="margin-top:14px">
        <section id="teamSection" class="panel">
          <h2>Teamhantering</h2>
          <div id="teamSummary" class="team-summary">
            <article class="team-summary-item">
              <div class="label">Totalt</div>
              <div id="teamSummaryTotal" class="value">0</div>
            </article>
            <article class="team-summary-item">
              <div class="label">Aktiva</div>
              <div id="teamSummaryActive" class="value">0</div>
            </article>
            <article class="team-summary-item">
              <div class="label">Inaktiva</div>
              <div id="teamSummaryDisabled" class="value">0</div>
            </article>
            <article class="team-summary-item">
              <div class="label">Ägare</div>
              <div id="teamSummaryOwners" class="value">0</div>
            </article>
          </div>
          <div class="team-profile-grid">
            <article class="team-profile-card">
              <h3>Bjud in / skapa medarbetare</h3>
              <div class="grid" style="margin-top:6px">
                <div>
                  <label for="staffEmailInput">E-post</label>
                  <input id="staffEmailInput" type="email" placeholder="staff@hairtpclinic.se" />
                </div>
                <div>
                  <label for="staffPasswordInput">Lösenord (valfritt)</label>
                  <input id="staffPasswordInput" type="password" placeholder="Tomt = auto-generera" />
                </div>
              </div>
              <div style="margin-top:10px" class="seg">
                <button id="createStaffBtn" class="btn primary">Skapa/Uppdatera medarbetare</button>
                <button id="generateStaffPasswordBtn" class="btn">Generera lösenord</button>
                <button id="copyInviteMessageBtn" class="btn">Kopiera inbjudningstext</button>
              </div>
              <div id="staffStatus" class="status-line"></div>
              <div id="staffInvitePreview" class="code-block" style="margin-top:8px">Ingen inbjudningstext ännu.</div>
            </article>
            <article class="team-profile-card">
              <h3>Min profil & säkerhet</h3>
              <div id="profileSummaryList" class="team-profile-list">
                <div class="team-profile-item">
                  <div class="label">E-post</div>
                  <div id="profileEmailValue" class="value">-</div>
                </div>
                <div class="team-profile-item">
                  <div class="label">Roll</div>
                  <div id="profileRoleValue" class="value">-</div>
                </div>
                <div class="team-profile-item">
                  <div class="label">Tenant</div>
                  <div id="profileTenantValue" class="value">-</div>
                </div>
                <div class="team-profile-item">
                  <div class="label">Session går ut</div>
                  <div id="profileSessionExpiresValue" class="value">-</div>
                </div>
                <div class="team-profile-item">
                  <div class="label">Behörigheter</div>
                  <div id="profilePermissionsValue" class="value">0</div>
                </div>
                <div class="team-profile-item">
                  <div class="label">Mina tenants</div>
                  <div id="profileTenantsValue" class="value">0</div>
                </div>
              </div>
              <div class="team-password-grid">
                <div>
                  <label for="currentPasswordInput">Nuvarande lösenord</label>
                  <input id="currentPasswordInput" type="password" placeholder="Nuvarande lösenord" />
                </div>
                <div>
                  <label for="newPasswordInput">Nytt lösenord</label>
                  <input id="newPasswordInput" type="password" placeholder="Minst 10 tecken" />
                </div>
              </div>
              <div class="invite-preview-actions">
                <button id="changeOwnPasswordBtn" class="btn">Byt mitt lösenord</button>
                <button id="refreshProfileBtn" class="btn small">Uppdatera profil</button>
              </div>
              <div id="profileStatus" class="status-line"></div>
            </article>
          </div>
          <div class="team-filters">
            <div>
              <label for="staffSearchInput">Sök staff</label>
              <input id="staffSearchInput" type="text" placeholder="Sök på e-post eller roll" />
            </div>
            <div>
              <label for="staffStatusFilter">Statusfilter</label>
              <select id="staffStatusFilter">
                <option value="">Alla</option>
                <option value="active">Aktiva</option>
                <option value="disabled">Inaktiva</option>
                <option value="owner">Ägare</option>
              </select>
            </div>
            <div>
              <label class="mini">Massåtgärder</label>
              <div class="seg">
                <button id="refreshStaffBtn" class="btn small">Uppdatera lista</button>
                <button id="staffEnableFilteredBtn" class="btn small">Aktivera filtrerade</button>
                <button id="staffDisableFilteredBtn" class="btn small">Inaktivera filtrerade</button>
              </div>
            </div>
          </div>
          <div style="overflow:auto; margin-top:10px">
            <table>
              <thead>
                <tr>
                  <th>E-post</th>
                  <th>Roll</th>
                  <th>Status</th>
                  <th>Senast ändrad</th>
                  <th></th>
                </tr>
              </thead>
              <tbody id="staffTableBody"></tbody>
            </table>
          </div>
          <div class="team-profile-card" style="margin-top:10px">
            <h3>Vald användarprofil</h3>
            <div id="selectedStaffMeta" class="mini muted">Ingen medarbetare vald.</div>
            <div id="selectedStaffDetails" class="code-block" style="margin-top:8px">Välj en rad i tabellen för att se detaljer och nästa steg.</div>
            <div class="invite-preview-actions">
              <button id="resetSelectedStaffPasswordBtn" class="btn small">Återställ lösenord</button>
              <button id="selectedStaffRoleBtn" class="btn small">Ändra roll</button>
              <button id="copySelectedStaffInviteBtn" class="btn small">Kopiera inbjudningstext</button>
            </div>
          </div>
          <h2 style="margin-top:18px">Aktiva sessioner</h2>
          <div class="seg" style="margin-top:8px">
            <label class="mini" for="sessionsScopeSelect" style="margin:0;display:flex;align-items:center;gap:8px">
              Omfång:
              <select id="sessionsScopeSelect" style="width:auto;min-width:130px">
                <option value="me">Min användare</option>
                <option value="tenant">Hela kliniken</option>
              </select>
            </label>
            <label class="mini" for="sessionsIncludeRevoked" style="margin:0;display:flex;align-items:center;gap:6px">
              <input id="sessionsIncludeRevoked" type="checkbox" style="width:auto" />
              Visa revokerade
            </label>
            <button id="loadSessionsBtn" class="btn small">Uppdatera sessioner</button>
          </div>
          <div id="sessionsStatus" class="status-line"></div>
          <div style="overflow:auto; margin-top:10px">
            <table>
              <thead>
                <tr>
                  <th>Session</th>
                  <th>Användare</th>
                  <th>Roll</th>
                  <th>Senast aktiv</th>
                  <th>Status</th>
                  <th></th>
                </tr>
              </thead>
              <tbody id="sessionsTableBody"></tbody>
            </table>
          </div>
        </section>

        <section class="panel">
          <h2>Risklabb (förhandsvisning)</h2>
          <div class="grid" style="margin-top:10px">
            <div>
              <label for="riskLabCategory">Kategori</label>
              <select id="riskLabCategory">
                <option value="CONSULTATION">CONSULTATION</option>
                <option value="BOOKING">BOOKING</option>
                <option value="AFTERCARE">AFTERCARE</option>
                <option value="LEAD">LEAD</option>
                <option value="INTERNAL">INTERNAL</option>
              </select>
            </div>
            <div>
              <label for="riskLabScope">Omfång</label>
              <select id="riskLabScope">
                <option value="output">Utdata</option>
                <option value="input">Indata</option>
              </select>
            </div>
            <div style="grid-column:1 / -1">
              <label for="riskLabContent">Text att utvärdera</label>
              <textarea id="riskLabContent" style="min-height:120px" placeholder="Klistra in malltext eller instruktion..."></textarea>
            </div>
            <div style="grid-column:1 / -1">
              <label for="riskLabVariables">Variabler (komma-separerat, valfritt)</label>
              <input id="riskLabVariables" type="text" placeholder="first_name, clinic_name" />
            </div>
          </div>
          <div class="seg" style="margin-top:10px">
            <button id="runRiskPreviewBtn" class="btn primary">Kör förhandsgranskning</button>
          </div>
          <div id="riskLabStatus" class="status-line"></div>
          <div id="riskLabResult" class="code-block" style="margin-top:8px">Ingen förhandsgranskning körd ännu.</div>
        </section>
      </div>

      <div id="opsSection" class="row cols-3" data-section-group="opsSection" style="margin-top:14px">
        <section class="panel">
          <h2>Arcana-orkestrering</h2>
          <div style="margin-top:10px">
            <label for="orchestratorPromptInput">Intern uppgift</label>
            <textarea id="orchestratorPromptInput" style="min-height:120px" placeholder="Ex: Granska high/critical och föreslå owner actions för idag."></textarea>
          </div>
          <div class="seg" style="margin-top:10px">
            <button id="runOrchestratorBtn" class="btn primary">Kör orkestrering</button>
          </div>
          <div id="orchestratorStatus" class="status-line"></div>
          <div id="orchestratorResult" class="code-block" style="margin-top:8px">Ingen körning ännu.</div>
        </section>

        <section class="panel">
          <h2>Riskkalibrering</h2>
          <div class="seg" style="margin-top:10px">
            <button id="fetchCalibrationSuggestionBtn" class="btn">Hämta förslag</button>
            <button id="applyCalibrationSuggestionBtn" class="btn primary">Applicera förslag</button>
          </div>
          <div style="margin-top:10px">
            <label for="calibrationNoteInput">Notering (valfritt)</label>
            <input id="calibrationNoteInput" type="text" placeholder="Ägarens notering för revisionsloggen" />
          </div>
          <div id="calibrationStatus" class="status-line"></div>
          <div id="calibrationResult" class="code-block" style="margin-top:8px">Inget kalibreringsförslag ännu.</div>
        </section>

        <section class="panel">
          <h2>Pilotrapport</h2>
          <div class="seg" style="margin-top:10px">
            <label class="mini" for="reportDaysInput" style="margin:0;display:flex;align-items:center;gap:8px">
              Dagar:
              <input id="reportDaysInput" type="number" value="14" min="1" max="90" style="width:96px" />
            </label>
            <button id="runPilotReportBtn" class="btn primary">Generera rapport</button>
          </div>
          <div id="reportStatus" class="status-line"></div>
          <div id="pilotReportResult" class="code-block" style="margin-top:8px">Ingen rapport körd ännu.</div>
        </section>

        <section class="panel">
          <h2>Mailinsikter</h2>
          <div class="seg" style="margin-top:10px">
            <button id="refreshMailInsightsBtn" class="btn">Ladda mail-insikter</button>
            <button id="previewMailSeedsBtn" class="btn">Förhandsvisa seeds → utkast</button>
            <button id="applyMailSeedsBtn" class="btn primary">Skapa utkast från seeds</button>
          </div>
          <div class="grid" style="margin-top:10px">
            <div>
              <label for="mailSeedsCategory">Kategori (valfri)</label>
              <select id="mailSeedsCategory">
                <option value="">Alla</option>
                <option value="CONSULTATION">CONSULTATION</option>
                <option value="BOOKING">BOOKING</option>
                <option value="AFTERCARE">AFTERCARE</option>
                <option value="LEAD">LEAD</option>
                <option value="INTERNAL">INTERNAL</option>
              </select>
            </div>
            <div>
              <label for="mailSeedsLimit">Limit (1–50)</label>
              <input id="mailSeedsLimit" type="number" min="1" max="50" value="8" />
            </div>
            <div style="grid-column:1 / -1">
              <label for="mailSeedsNamePrefix">Namn-prefix (valfri)</label>
              <input id="mailSeedsNamePrefix" type="text" placeholder="Mail seed HTPC" />
            </div>
          </div>
          <div class="muted" style="margin-top:8px">
            Läser anonymiserade filer från <code>knowledge/&lt;brand&gt;/mail</code>.
          </div>
          <div id="mailInsightsStatus" class="status-line"></div>
          <div id="mailInsightsResult" class="code-block" style="margin-top:8px">Ingen mail-data ännu.</div>
        </section>

        <section class="panel">
          <h2>Driftstatus</h2>
          <div class="seg" style="margin-top:10px">
            <button id="refreshMonitorBtn" class="btn">Uppdatera monitor</button>
          </div>
          <div id="monitorPanelStatus" class="status-line"></div>
          <div id="monitorResult" class="code-block" style="margin-top:8px">Ingen driftdata ännu.</div>
        </section>

        <section class="panel">
          <h2>Driftbackup</h2>
          <div class="seg" style="margin-top:10px">
            <button id="loadStateManifestBtn" class="btn">Läs state manifest</button>
            <button id="createStateBackupBtn" class="btn primary">Skapa backup</button>
            <button id="listStateBackupsBtn" class="btn">Lista säkerhetskopior</button>
            <button id="previewPruneBackupsBtn" class="btn">Förhandsvisa rensning</button>
            <button id="runPruneBackupsBtn" class="btn danger">Kör prune</button>
          </div>
          <div style="margin-top:10px">
            <label for="restoreBackupFileInput">Backupfil (från listan)</label>
            <input id="restoreBackupFileInput" type="text" placeholder="arcana-state-YYYYMMDD-HHMMSS.json" />
          </div>
          <div class="seg" style="margin-top:10px">
            <button id="previewStateRestoreBtn" class="btn">Förhandsvisa återställning</button>
            <button id="runStateRestoreBtn" class="btn danger">Kör restore</button>
          </div>
          <div class="muted" style="margin-top:8px">
            Restore kräver bekräftelse med exakt text: <code>RESTORE &lt;filnamn&gt;</code>
          </div>
          <div id="opsStatus" class="status-line"></div>
          <div id="opsResult" class="code-block" style="margin-top:8px">Ingen driftsdata ännu.</div>
        </section>
      </div>

      <section id="templateLifecycleSection" data-section-group="templateLifecycleSection" class="panel" style="margin-top:14px">
        <h2>Mallflöde</h2>
        <div class="grid" style="margin-top:10px">
          <div>
            <label for="templateNameInput">Ny mall: namn</label>
            <input id="templateNameInput" type="text" placeholder="Ex. Konsultation bekräftelse" />
          </div>
          <div>
            <label for="templateCategoryInput">Kategori</label>
            <select id="templateCategoryInput">
              <option value="CONSULTATION">CONSULTATION</option>
              <option value="BOOKING">BOOKING</option>
              <option value="AFTERCARE">AFTERCARE</option>
              <option value="LEAD">LEAD</option>
              <option value="INTERNAL">INTERNAL</option>
            </select>
          </div>
          <div>
            <label for="templateChannelInput">Kanal</label>
            <input id="templateChannelInput" type="text" value="email" />
          </div>
          <div>
            <label for="templateLocaleInput">Språk-kod</label>
            <input id="templateLocaleInput" type="text" value="sv-SE" />
          </div>
        </div>
        <div style="margin-top:12px" class="seg">
          <button id="createTemplateBtn" class="btn primary">Skapa mall</button>
        </div>
        <div class="grid" style="margin-top:10px">
          <div>
            <label for="templateSearchInput">Sök mall</label>
            <input id="templateSearchInput" type="text" placeholder="Namn, kategori, språk-kod, kanal..." />
          </div>
          <div>
            <label for="templateFilterSelect">Kategori</label>
            <select id="templateFilterSelect">
              <option value="">Alla</option>
              <option value="CONSULTATION">CONSULTATION</option>
              <option value="BOOKING">BOOKING</option>
              <option value="AFTERCARE">AFTERCARE</option>
              <option value="LEAD">LEAD</option>
              <option value="INTERNAL">INTERNAL</option>
            </select>
          </div>
          <div>
            <label for="templateStatusFilterSelect">Status</label>
            <select id="templateStatusFilterSelect">
              <option value="">Alla</option>
              <option value="with_active">Med aktiv version</option>
              <option value="without_active">Utan aktiv version</option>
            </select>
          </div>
          <div>
            <label for="templateSortSelect">Sortering</label>
            <select id="templateSortSelect">
              <option value="updated_desc">Senast uppdaterad</option>
              <option value="name_asc">Namn A–Ö</option>
              <option value="name_desc">Namn Ö–A</option>
              <option value="category_asc">Kategori A–Ö</option>
              <option value="risk_desc">Högst risk först</option>
            </select>
          </div>
        </div>
        <div id="templateCategoryChips" class="seg template-category-chips" style="margin-top:8px"></div>
        <div id="templateStatus" class="status-line"></div>
        <div id="templateResultsMeta" class="mini muted" style="margin-top:6px"></div>
        <div class="seg template-view-toggle" style="margin-top:8px">
          <span class="mini muted">Vy:</span>
          <button id="templateViewTableBtn" class="btn small active">Tabell</button>
          <button id="templateViewCardBtn" class="btn small">Kort</button>
        </div>
        <div class="seg template-bulk-toolbar" style="margin-top:8px">
          <label class="mini muted" for="templateBulkAction" style="display:flex;align-items:center;gap:8px">
            Massåtgärd:
            <select id="templateBulkAction" style="width:auto;min-width:220px">
              <option value="evaluate_latest">Utvärdera senaste version</option>
              <option value="clone_latest">Klona senaste version</option>
              <option value="archive_active">Arkivera aktiv version (OWNER)</option>
            </select>
          </label>
          <button id="applyTemplateBulkBtn" class="btn small">Applicera på valda</button>
          <button id="templateClearSelectionBtn" class="btn small">Rensa val</button>
          <div id="templateSelectionMeta" class="template-selection-meta mini muted">0 valda</div>
        </div>
        <div id="templateBulkStatus" class="status-line"></div>

        <div class="row cols-2" style="margin-top:10px">
          <div>
            <h3>Mallar</h3>
            <div id="templateCardList" class="template-card-grid hidden"></div>
            <div id="templateTableWrap" style="overflow:auto">
              <table>
                <thead>
                  <tr>
                    <th class="template-select-col">
                      <input id="templateSelectAll" type="checkbox" title="Välj alla mallar i listan" />
                    </th>
                    <th>Namn</th>
                    <th>Kategori</th>
                    <th>Status</th>
                    <th>Aktiv</th>
                    <th>Risk</th>
                    <th>Uppdaterad</th>
                    <th></th>
                  </tr>
                </thead>
                <tbody id="templateTableBody"></tbody>
              </table>
            </div>
          </div>
          <div>
            <h3>Versioner</h3>
            <div id="selectedTemplateMeta" class="mini muted" style="margin-bottom:8px">Ingen mall vald.</div>
            <div style="overflow:auto">
              <table>
                <thead>
                  <tr>
                    <th>v#</th>
                    <th>Tillstånd</th>
                    <th>Risk</th>
                    <th></th>
                  </tr>
                </thead>
                <tbody id="versionTableBody"></tbody>
              </table>
            </div>
          </div>
        </div>

        <div style="margin-top:14px">
          <h3>Versionsredigerare</h3>
          <div id="selectedVersionMeta" class="mini muted" style="margin-bottom:8px">Ingen version vald.</div>
          <div class="grid">
            <div>
              <label for="versionTitleInput">Titel</label>
              <input id="versionTitleInput" type="text" />
            </div>
            <div>
              <label for="draftInstructionInput">AI-instruktion (för nytt utkast)</label>
              <input id="draftInstructionInput" type="text" placeholder="Skriv vad mallen ska innehålla..." />
            </div>
            <div style="grid-column:1 / -1">
              <label for="versionContentInput">Innehåll</label>
              <textarea id="versionContentInput" style="min-height:160px"></textarea>
            </div>
          </div>
          <div class="template-editor-assist">
            <article class="template-editor-card">
              <h4>Variabler</h4>
              <div id="templateVariableMeta" class="mini muted">Laddar variabelpolicy…</div>
              <div id="templateRequiredVariables" class="template-variable-cloud"></div>
              <div class="mini muted" style="margin-top:10px">Lägg in variabeltoken i innehållet:</div>
              <div id="templateVariablePicker" class="template-variable-cloud"></div>
            </article>
            <article class="template-editor-card">
              <h4>Validering</h4>
              <div id="templateValidationList" class="template-validation-list"></div>
              <div class="template-signature-row">
                <span id="templateSignatureStatus" class="mini muted">Signatur: okänd</span>
                <button id="appendSignatureBtn" class="btn small">Lägg till signatur</button>
              </div>
            </article>
          </div>
          <div class="seg" style="margin-top:10px">
            <button id="generateDraftBtn" class="btn">Generera utkast (AI)</button>
            <button id="saveDraftBtn" class="btn">Spara draft</button>
            <button id="evaluateBtn" class="btn">Utvärdera</button>
            <button id="activateBtn" class="btn primary">Aktivera</button>
            <button id="archiveBtn" class="btn">Arkivera</button>
            <button id="cloneBtn" class="btn">Klona</button>
          </div>
          <div id="versionStatus" class="status-line"></div>
          <div id="versionRiskBlock" class="code-block" style="margin-top:8px"></div>
        </div>
      </section>

      <section id="reviewsIncidentsSection" data-section-group="reviewsIncidentsSection" class="panel" style="margin-top:14px">
        <h2>Granskningar & incidenter</h2>
        <div class="muted" style="margin-bottom:10px">Granskningar = L3 • Incidenter = L4–L5 med SLA (L4: 4h, L5: 30m)</div>
        <div id="riskQueueSummary" class="seg" style="margin-bottom:10px"></div>
        <div class="seg" style="margin-bottom:10px">
          <label class="mini" for="riskMinFilter" style="margin:0;display:flex;align-items:center;gap:8px">
            Min risk:
            <select id="riskMinFilter" style="width:auto;min-width:120px">
              <option value="1">1</option>
              <option value="2">2</option>
              <option value="3" selected>3</option>
              <option value="4">4</option>
              <option value="5">5</option>
            </select>
          </label>
          <label class="mini" for="riskMaxFilter" style="margin:0;display:flex;align-items:center;gap:8px">
            Max risk:
            <select id="riskMaxFilter" style="width:auto;min-width:120px">
              <option value="1">1</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5" selected>5</option>
            </select>
          </label>
          <label class="mini" for="riskDecisionFilter" style="margin:0;display:flex;align-items:center;gap:8px">
            Beslut:
            <select id="riskDecisionFilter" style="width:auto;min-width:190px">
              <option value="">Alla</option>
              <option value="allow">Tillåten</option>
              <option value="review_required">Kräver granskning</option>
              <option value="blocked">Blockerad</option>
            </select>
          </label>
          <label class="mini" for="riskOwnerDecisionFilter" style="margin:0;display:flex;align-items:center;gap:8px">
            Ägarbeslut:
            <select id="riskOwnerDecisionFilter" style="width:auto;min-width:180px">
              <option value="">Alla</option>
              <option value="pending">Väntar</option>
              <option value="approved_exception">Godkänd avvikelse</option>
              <option value="false_positive">Falskt positiv</option>
              <option value="revision_requested">Revidering begärd</option>
              <option value="escalated">Eskalering</option>
            </select>
          </label>
          <label class="mini" for="riskStateFilter" style="margin:0;display:flex;align-items:center;gap:8px">
            Status:
            <select id="riskStateFilter" style="width:auto;min-width:140px">
              <option value="">Alla</option>
              <option value="open">Öppen</option>
              <option value="closed">Stängd</option>
            </select>
          </label>
          <label class="mini" for="riskCategoryFilter" style="margin:0;display:flex;align-items:center;gap:8px">
            Kategori:
            <select id="riskCategoryFilter" style="width:auto;min-width:180px">
              <option value="">Alla</option>
            </select>
          </label>
          <label class="mini" for="riskSinceDaysFilter" style="margin:0;display:flex;align-items:center;gap:8px">
            Datum:
            <select id="riskSinceDaysFilter" style="width:auto;min-width:150px">
              <option value="0">Alla</option>
              <option value="1">Senaste 24h</option>
              <option value="7">Senaste 7 dagar</option>
              <option value="14" selected>Senaste 14 dagar</option>
              <option value="30">Senaste 30 dagar</option>
              <option value="90">Senaste 90 dagar</option>
            </select>
          </label>
          <label class="mini" for="riskReasonFilter" style="margin:0;display:flex;align-items:center;gap:8px">
            Orsakskod:
            <input id="riskReasonFilter" type="text" placeholder="Ex. policy_" style="min-width:180px;max-width:260px" />
          </label>
          <label class="mini" for="riskSearchFilter" style="margin:0;display:flex;align-items:center;gap:8px">
            Sök:
            <input id="riskSearchFilter" type="text" placeholder="utvärdering/mall/orsak" style="min-width:220px;max-width:320px" />
          </label>
          <button id="applyRiskFilterBtn" class="btn small">Applicera filter</button>
          <button id="riskShowPendingBtn" class="btn small">Endast pending</button>
          <button id="riskShowHighCriticalBtn" class="btn small">Hög/Kritisk</button>
          <button id="riskClearFiltersBtn" class="btn small">Rensa filter</button>
        </div>
        <div class="seg" style="margin-bottom:10px">
          <label class="mini" for="riskBulkAction" style="margin:0;display:flex;align-items:center;gap:8px">
            Massåtgärd:
            <select id="riskBulkAction" style="width:auto;min-width:220px">
              <option value="request_revision">Begär revidering</option>
              <option value="approve_exception">Godkänn avvikelse</option>
              <option value="mark_false_positive">Markera falskt positiv</option>
              <option value="escalate">Eskalera</option>
            </select>
          </label>
          <input id="riskBulkNote" type="text" placeholder="Notering för bulk action (valfritt)" style="min-width:280px;max-width:420px" />
          <button id="applyRiskBulkBtn" class="btn small">Applicera på valda</button>
        </div>
        <div id="riskActionStatus" class="status-line"></div>
        <div class="grid" style="margin-top:8px">
          <div id="reviewsQueueSection">
            <h3>Granskningar (L3) <span id="riskReviewsCount" class="mini muted"></span></h3>
            <div id="riskReviewsWrap" style="overflow:auto">
              <table>
                <thead>
                  <tr>
                    <th>
                      <input id="riskSelectAllReviews" type="checkbox" title="Välj alla granskningar" />
                    </th>
                    <th>Utvärdering</th>
                    <th>Mall</th>
                    <th>Kategori</th>
                    <th>Tid</th>
                    <th>Risk</th>
                    <th>Beslut</th>
                    <th>Ägare</th>
                    <th>AI/Regel</th>
                    <th>Policy</th>
                    <th>Orsak</th>
                    <th>Åtgärd</th>
                  </tr>
                </thead>
                <tbody id="riskReviewsTableBody"></tbody>
              </table>
            </div>
          </div>
          <div id="incidentsQueueSection">
            <h3>Incidenter (L4-L5) <span id="riskIncidentsCount" class="mini muted"></span></h3>
            <div id="riskIncidentsWrap" style="overflow:auto">
              <table>
                <thead>
                  <tr>
                    <th>
                      <input id="riskSelectAllIncidents" type="checkbox" title="Välj alla incidenter" />
                    </th>
                    <th>SLA</th>
                    <th>Utvärdering</th>
                    <th>Mall</th>
                    <th>Kategori</th>
                    <th>Tid</th>
                    <th>Risk</th>
                    <th>Beslut</th>
                    <th>Ägare</th>
                    <th>Orsak</th>
                    <th>Åtgärd</th>
                  </tr>
                </thead>
                <tbody id="riskIncidentsTableBody"></tbody>
              </table>
            </div>
          </div>
        </div>
        <div style="margin-top:12px">
          <h3>Vald riskutvärdering</h3>
          <div id="riskDetailMeta" class="mini muted" style="margin-bottom:8px">Ingen utvärdering vald.</div>
          <div class="risk-detail-layout">
            <article class="risk-detail-card">
              <h4>Översikt</h4>
              <div id="riskDetailSummary" class="mini muted">Ingen detaljerad riskdata ännu.</div>
              <div id="riskDetailSla" class="mini muted" style="margin-top:8px">Ingen incident-SLA.</div>
              <div id="riskDetailQuickActions" class="risk-detail-actions">
                <input id="riskDetailNoteInput" type="text" placeholder="Notering för ägaråtgärd (valfritt)" />
                <button class="btn small" data-owner-action="request_revision">Begär revidering</button>
                <button class="btn small" data-owner-action="approve_exception">Godkänn avvikelse</button>
                <button class="btn small" data-owner-action="mark_false_positive">Markera falskt positiv</button>
                <button class="btn small" data-owner-action="escalate">Eskalera</button>
              </div>
            </article>
            <article class="risk-detail-card">
              <h4>Incidenttidslinje</h4>
              <ul id="riskDetailTimeline" class="risk-timeline">
                <li class="muted mini">Ingen tidslinje ännu.</li>
              </ul>
            </article>
          </div>
          <details style="margin-top:10px">
            <summary class="mini muted" style="cursor:pointer">Rå JSON</summary>
            <div id="riskDetailBlock" class="code-block" style="margin-top:8px">Ingen detaljerad riskdata ännu.</div>
          </details>
        </div>
      </section>

      <section id="auditSection" data-section-group="auditSection" class="panel" style="margin-top:14px">
        <h2>Revisionslogg</h2>
        <div class="muted" style="margin-bottom:10px">Filtrera på användare/åtgärd/datum/risk och öppna detaljer per händelse.</div>
        <div class="grid" style="margin-top:10px">
          <div>
            <label for="auditSearchInput">Sök (korrelation/id/mall/användare)</label>
            <input id="auditSearchInput" type="text" placeholder="Sök i åtgärd, mål, användare, metadata..." />
          </div>
          <div>
            <label for="auditActionFilter">Åtgärd</label>
            <select id="auditActionFilter">
              <option value="">Alla</option>
            </select>
          </div>
          <div>
            <label for="auditActorFilter">Användar-id (valfritt)</label>
            <input id="auditActorFilter" type="text" placeholder="Ex. 60035ab8..." />
          </div>
          <div>
            <label for="auditTargetTypeFilter">Måltyp</label>
            <select id="auditTargetTypeFilter">
              <option value="">Alla</option>
            </select>
          </div>
          <div>
            <label for="auditOutcomeFilter">Utfall</label>
            <select id="auditOutcomeFilter">
              <option value="">Alla</option>
              <option value="success">Lyckad</option>
              <option value="error">Fel</option>
            </select>
          </div>
          <div>
            <label for="auditSeverityFilter">Risknivå</label>
            <select id="auditSeverityFilter">
              <option value="">Alla</option>
              <option value="low">L1-L2 (låg)</option>
              <option value="moderate">L3 (granskning)</option>
              <option value="high_critical">L4-L5 (incident)</option>
              <option value="none">Ingen risknivå</option>
            </select>
          </div>
          <div>
            <label for="auditSinceDaysFilter">Senaste dagar</label>
            <select id="auditSinceDaysFilter">
              <option value="1">1 dag</option>
              <option value="7">7 dagar</option>
              <option value="14" selected>14 dagar</option>
              <option value="30">30 dagar</option>
              <option value="90">90 dagar</option>
              <option value="0">Alla</option>
            </select>
          </div>
          <div>
            <label for="auditLimitFilter">API-gräns</label>
            <select id="auditLimitFilter">
              <option value="100">100</option>
              <option value="200" selected>200</option>
              <option value="300">300</option>
              <option value="500">500</option>
            </select>
          </div>
        </div>
        <div class="seg" style="margin-top:10px">
          <button id="applyAuditFilterBtn" class="btn small">Applicera filter</button>
          <button id="clearAuditFilterBtn" class="btn small">Rensa filter</button>
        </div>
        <div id="auditSummary" class="audit-summary"></div>
        <div class="audit-layout">
          <ul id="auditTimeline" class="audit-timeline">
            <li class="audit-timeline-item muted mini">Ingen revisionsdata ännu.</li>
          </ul>
          <div class="audit-detail">
            <div id="auditDetailMeta" class="mini muted">Ingen revisionshändelse vald.</div>
            <ul id="auditDetailFacts" class="audit-facts">
              <li>Välj en händelse i listan för detaljer.</li>
            </ul>
            <div id="auditDetailDiffMeta" class="mini muted" style="margin-top:10px">Ingen ändringsdata ännu.</div>
            <div id="auditDetailDiff" class="audit-diff">
              <div class="audit-diff-row muted mini">Välj en händelse för att se före/efter.</div>
            </div>
            <details style="margin-top:10px">
              <summary class="mini muted" style="cursor:pointer">Rå JSON</summary>
              <div id="auditDetailRaw" class="code-block" style="margin-top:8px">Ingen revisionshändelse vald.</div>
            </details>
          </div>
        </div>
      </section>
    </section>
  </div>
  <div id="appModalBackdrop" class="modal-backdrop hidden" role="dialog" aria-modal="true" aria-labelledby="appModalTitle">
    <div class="modal-dialog" id="appModalDialog">
      <div class="modal-header">
        <h3 id="appModalTitle" class="modal-title">Bekräfta</h3>
        <button id="appModalCloseBtn" class="btn small" type="button" aria-label="Stäng dialog">✕</button>
      </div>
      <p id="appModalSubtitle" class="modal-subtitle">Är du säker?</p>
      <div class="modal-body">
        <label id="appModalInputLabel" class="modal-label hidden" for="appModalInput">Notering</label>
        <input id="appModalInput" class="modal-input hidden" type="text" />
        <textarea id="appModalTextarea" class="modal-input hidden" style="min-height:110px"></textarea>
        <p id="appModalHint" class="modal-hint hidden"></p>
      </div>
      <div class="modal-footer">
        <button id="appModalCancelBtn" class="btn" type="button">Avbryt</button>
        <button id="appModalConfirmBtn" class="btn primary" type="button">Bekräfta</button>
      </div>
    </div>
  </div>
  <div id="toastViewport" class="toast-viewport" aria-live="polite" aria-atomic="false"></div>

  <script src="/admin.js"></script>
</body>
</html>
